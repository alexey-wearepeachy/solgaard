{%- assign display = section.settings.display -%}
{%- assign display_class = '' -%}
{% if display == 'mobile_only' %}
	{%- assign display_class = 'cf-mobile-only' -%}
{% elsif display == 'desktop_only' %}
	{%- assign display_class = 'cf-desktop-only' -%}
{% endif %}

<div class="cf05-outer cf-display-section {{display_class}}">
  <h2 class="section-title h1">{{section.settings.title}}</h2>
  <div class="cf05-tabs">
  {% for item in section.blocks %}
    <div class="cf05-tab-btn {% if forloop.index == 1 %}cf05-active{% endif %}" id="cf05-{{item.settings.name | downcase}}-btn" style="left: 10px;"><span>{{item.settings.name}}</span></div>
  {% endfor %}
  </div>
  
  {% for item in section.blocks %}
  <div class="cf05-content-flex {% if forloop.index == 1 %}cf05-active{% endif %}" id="cf05-{{item.settings.name | downcase}}">
    <div class="cf05-info">
      <div class="cf05-info-title">{{item.settings.title}}</div>
      <div class="cf05-info-stars">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="17" viewBox="0 0 18 17">
          <g fill="none" fill-rule="evenodd">
            <g fill="#40C1AC">
              <g>
                <g>
                  <g>
                    <path d="M9 12.917L3.71 16.281 5.275 10.21 0.44 6.219 6.698 5.831 9 0 11.302 5.831 17.56 6.219 12.725 10.21 14.29 16.281z" transform="translate(-272 -676) translate(120 413) translate(30 205) translate(122 58)"></path>
                  </g>
                </g>
              </g>
            </g>
          </g>
        </svg>
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="17" viewBox="0 0 18 17">
          <g fill="none" fill-rule="evenodd">
            <g fill="#40C1AC">
              <g>
                <g>
                  <g>
                    <path d="M9 12.917L3.71 16.281 5.275 10.21 0.44 6.219 6.698 5.831 9 0 11.302 5.831 17.56 6.219 12.725 10.21 14.29 16.281z" transform="translate(-272 -676) translate(120 413) translate(30 205) translate(122 58)"></path>
                  </g>
                </g>
              </g>
            </g>
          </g>
        </svg>
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="17" viewBox="0 0 18 17">
          <g fill="none" fill-rule="evenodd">
            <g fill="#40C1AC">
              <g>
                <g>
                  <g>
                    <path d="M9 12.917L3.71 16.281 5.275 10.21 0.44 6.219 6.698 5.831 9 0 11.302 5.831 17.56 6.219 12.725 10.21 14.29 16.281z" transform="translate(-272 -676) translate(120 413) translate(30 205) translate(122 58)"></path>
                  </g>
                </g>
              </g>
            </g>
          </g>
        </svg>
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="17" viewBox="0 0 18 17">
          <g fill="none" fill-rule="evenodd">
            <g fill="#40C1AC">
              <g>
                <g>
                  <g>
                    <path d="M9 12.917L3.71 16.281 5.275 10.21 0.44 6.219 6.698 5.831 9 0 11.302 5.831 17.56 6.219 12.725 10.21 14.29 16.281z" transform="translate(-272 -676) translate(120 413) translate(30 205) translate(122 58)"></path>
                  </g>
                </g>
              </g>
            </g>
          </g>
        </svg>
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="17" viewBox="0 0 18 17">
          <g fill="none" fill-rule="evenodd">
            <g fill="#40C1AC">
              <g>
                <g>
                  <g>
                    <path d="M9 12.917L3.71 16.281 5.275 10.21 0.44 6.219 6.698 5.831 9 0 11.302 5.831 17.56 6.219 12.725 10.21 14.29 16.281z" transform="translate(-272 -676) translate(120 413) translate(30 205) translate(122 58)"></path>
                  </g>
                </g>
              </g>
            </g>
          </g>
        </svg>
      </div>
      <div class="cf05-info-quote">“{{item.settings.quote}}”</div>
      <a class="cf05-info-cta" href="{{item.settings.url}}">Shop Now</a>
    </div>
    <a class="cf05-image" href="{{item.settings.image | img_url: '720x'}}">
    <img class="cf05-desktop-image" src="{{item.settings.image | img_url: '720x'}}" alt="{{ item.settings.title }}">
    <img class="cf05-mobile-image" src="{{item.settings.image | img_url: '720x'}}" alt="{{ item.settings.title }}">
    </a>
    <div class="cf05-features">
      <div class="cf05-feature-title">{{item.settings.f1_title}}</div>
      <div class="cf05-feature-item">{{item.settings.f1_subtitle | newline_to_br}}</div>
      
      <div class="cf05-feature-title">{{item.settings.f2_title}}</div>
      <div class="cf05-feature-item">{{item.settings.f2_subtitle | newline_to_br}}</div>
      
      <div class="cf05-feature-title">{{item.settings.f3_title}}</div>
      <div class="cf05-feature-item">{{item.settings.f3_subtitle | newline_to_br}}</div>
    </div>
    <a class="cf05-mobile-cta" href="{{item.settings.link}}">Shop Now</a>
  </div>
  {% endfor %}
</div>

<script>
$(document).ready(function(){
  $('.cf05-tab-btn').click(function() { 
      $('.cf05-tab-btn').removeClass('cf05-active');
      $('.cf05-content-flex').removeClass('cf05-active');

      var index = $(this).index();
      $(`.cf05-tab-btn:eq(${index})`).addClass('cf05-active');
      $(`.cf05-content-flex:eq(${index})`).addClass('cf05-active');
      // 140*3 + 20 and it isn't needed... 440

      var width = $('body').width();
      console.log('index',index,'width',width);
      if(width < 440) {
          if(index == 0) {
              $('.cf05-tab-btn').css('left',10);
          }
          if(index == 1) {
              var offset = 10-((440-width)/2);
              $('.cf05-tab-btn').css('left',offset);
          }
          if(index == 2) {
              var offset = 10-(440-width);
              $('.cf05-tab-btn').css('left',offset);
          }
      } else {
          $('.cf05-tab-btn').css('left','unset');
      }
  });
});
</script>


{% schema %}
  {
    "name": "Tab Slider",
	"class": "index-section",
	"max_blocks": 3,
    "settings": [
	  {
        "type": "text",
        "id": "title",
        "label": "Heading",
        "default": "TRAVEL MUST HAVES"
      },
	  {
        "type": "select",
        "id": "display",
        "label": "DIsplay",
        "options": [
          {
            "value": "both",
            "label": "Mobile & Desktop"
          },
          {
            "value": "mobile_only",
            "label": "Mobile Only"
          },
          {
            "value": "desktop_only",
            "label": "Desktop Only"
          }
        ],
        "default": "both"
      }
	],
	"blocks": [
      {
        "type": "collection",
        "name": "Collection",
        "settings": [
		  {
            "type": "text",
            "id": "name",
            "label": "Name"
          },
		  {
            "type": "text",
            "id": "title",
            "label": "Title"
          },
          {
            "type": "textarea",
            "id": "quote",
            "label": "Quote"
          },
		  {
            "type": "text",
            "id": "f1_title",
            "label": "Feature 1 Title"
          },
		  {
            "type": "textarea",
            "id": "f1_subtitle",
            "label": "Feature 1 Subtitle"
          },
		  {
            "type": "text",
            "id": "f2_title",
            "label": "Feature 2 Title"
          },
		  {
            "type": "textarea",
            "id": "f2_subtitle",
            "label": "Feature 2 Subtitle"
          },
		  {
            "type": "text",
            "id": "f3_title",
            "label": "Feature 3 Title"
          },
		  {
            "type": "textarea",
            "id": "f3_subtitle",
            "label": "Feature 3 Subtitle"
          },
          {
            "type": "url",
            "id": "link",
            "label": "Shop Now Link"
          },
          {
            "type": "image_picker",
            "id": "image",
            "label": "Image"
          }
        ]
      }
    ],
	"presets": [
      {
        "name": "Tab Slider",
        "category": "Collection"
      }
    ]
  }
{% endschema %}
